# üîí –ù–ê–°–¢–†–û–ô–ö–ê –†–ê–ó–†–ï–®–ï–ù–ò–ô

1. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ **`–°—Ç—É–¥–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π`** –∏ –≤—ã–±–∏—Ä–∞–µ–º –Ω—É–∂–Ω—ã–π **SOLUTION**

![AppStudio](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/IMG/AppStudio.png?raw=true)

2. –í —Å–∞–π–¥–±–∞—Ä–µ **`Security`** => **`Roles`**

![img1](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/8%20Security/IMG/1.png?raw=true)

3. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Ä–æ–ª—å –Ω–∞–∂–∞–≤ **`New Role`**
4. –í —Å–∞–π–¥–±–∞—Ä–µ **`Applications`** => **`User Applications`**
5. –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –∫–ª–∏–∫–∞–µ–º –Ω—É–∂–Ω—ã–π —Ä–µ—Å—É—Ä—Å _(—Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)_ => –ù–∞ –≤–∫–ª–∞–¥–∫–µ **`Item Permissions`** –∏ **`Application Permissions`** –∑–∞–ø–æ–ª–Ω—è–µ–º –Ω—É–∂–Ω—ã–µ **_Permissions_** _(–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã –æ–±–æ–∑–Ω–∞—á–∏–º, –∫–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –¥–∞–Ω–Ω–æ–π —Ä–æ–ª–µ)_ .
      * –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø—Ä–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –∂–º–µ–º **`Edit`** => –∫–ª–∏–∫–∞–µ–º –Ω—É–∂–Ω—ã–µ => –∂–º–µ–º **`Save`** _(–¢–∞–∫ )_

![img2](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/8%20Security/IMG/2.png?raw=true)

6. –ü–æ—Å–ª–µ –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è **_Permissions_** –¥–µ–ª–∞–µ–º [–¥–µ–ø–ª–æ–π](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/2%20Deploy/Deploy.md)
7. –î–∞–ª–µ–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–∞–∑–¥–µ–ª **`Manage Users`** => **`User Management`** => **`Groups`**

![img3](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/8%20Security/IMG/3.png?raw=true)

8. –°–æ–∑–¥–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –≥—Ä—É–ø–ø—É –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–ª–∏ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç–∞ –≥—Ä—É–ø–ø–∞
    * –ü—Ä–æ–≤–∞–ª–∏–≤–∞–µ–º—Å—è –≤ —Å–æ–∑–¥–∞–Ω–Ω—É—é –≥—Ä—É–ø–ø—É => –≤–∫–ª–∞–¥–∫–∞ **`Group Roles`** => –≤—ã–±–∏—Ä–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–æ–ª–∏

![img4](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/8%20Security/IMG/4.png?raw=true)


<br/>

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä: –¥–æ—Å—Ç—É–ø –∫ –∫–Ω–æ–ø–∫–µ, —Å–∫—Ä—ã—Ç–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π –∏ —Ç.–¥. –∏ —Ç.–ø. _(–µ—Å–ª–∏ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)_, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ–Ω—è—Ç–∏–µ **`–ë–∏–∑–Ω–µ—Å –†–æ–ª—å`**. **_(–ë–†)_**

1. –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ **`Setup`** —Å–æ–ª—é—à–µ–Ω–∞ => **`Internal People`** => **`Business Roles`**

![img5](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/8%20Security/IMG/5.png?raw=true)

2. –°–æ–∑–¥–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –ë–†
3. –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–µ–µ –∞–≥–µ–Ω—Ç–æ–≤, –ø—É—Ç–µ–º –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ **`Add/Remove Case Workers`**

![img6](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/8%20Security/IMG/6.png?raw=true)

4. –î–∞–ª–µ–µ –≤ –∫–æ–¥–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É UI —ç–ª–µ–º–µ–Ω—Ç—É:
  * –ü—Ä–æ—Å—Ç–∞–≤–ª—è–µ–º –Ω–∞ Panel –∞—Ç—Ä–∏–±—É—Ç —ç–ª–µ–º–µ–Ω—Ç—É, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ–º —Å–∫—Ä—ã—Ç—å:
```JavaScript
    bind: {hidden: '{isExtAgent}'}
    // –ï—Å–ª–∏ BIND —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞–≤–∏–º –∑–∞–ø—è—Ç—É—é –∏ –ø–∏—à–µ–º hidden: '{isExtAgent}'
```
  * –°–∞–º —ç–ª–µ–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤–æ **`ViewModel`**

  _–ö–∞–∫ –≤–∏–¥–Ω–æ –≤ –ø—Ä–∏–º–µ—Ä–µ, –ø–æ –¥–µ—Ñ–æ–ª—Ç—É_ **_isExtAgent_**: `false` _(–ø—Ä–æ–ø–∏—Å–∞–Ω –≤ **data**)_. –°–º–µ–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø—Ä–æ–ø–∏—Å–∞–Ω–∞ —á—É—Ç—å –Ω–∏–∂–µ –≤ **formulas**
```JavaScript
    Ext.define('SD.view.ExternalParty.Individual.ViewModel', {
        extend: 'Ext.app.ViewModel',
        alias: 'viewmodel.IndividualViewModel',
        requires: [ 'SD.model.SDDict', 'SD.model.Individual', 'SD.model.AddressExternalParties', 'SD.model.PartyType' ],
        data: {
            searchIndividual: null, isEditable: false, isExtAgent: false,
            current: {Individual: null, editMode: 'Modify'}
        },
        formulas: {
            isHiddenBtn: function(get) {
                if (get('isAgent')) {return true;} else {return get('isEditable');}
            }
        },
```
  * –î–∞–ª–µ–µ –≤ **`Controller`** —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ë–î, —Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤ –∫–∞–∫–∏—Ö –ë–∏–∑–Ω–µ—Å-–ì—Ä—É–ø–ø–∞—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —é–∑–µ—Ä –∏ –æ—Ç —ç—Ç–æ–≥–æ –ª–∏–±–æ —Å–∫—Ä—ã–≤–∞–µ—Ç, –ª–∏–±–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç.
```JavaScript
    if (Ext.isEmpty(roles)) {
      EcxUtils5.Request.executeRule('ROOT_SD_CHECKBUSINESSROLE', null , function (response, options, srd) {
              var result = srd.parsedData.ROLES;
              if (result.indexOf('CLL_AGENT', 0) >= 0) vm.set('isAgent', 1);
              if (result.indexOf('CLL_EXTAGENT', 0) >= 0) {
                  vm.set('isAgent', 1);
                  vm.set('isExtAgent', 1);
              }
              sessionStorage.setItem('IndividualRoles',result);
          }
          , null, {preventParentCallback: true});
    }
```

**_NOTE:_** _–í –ø—Ä–æ–µ–∫—Ç–µ_ **_EXPO_** _—Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ñ–∞–π–ª **`DCM_GLOBAL_JS`**, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è/–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø–∏—Å–∞–Ω–Ω–∞—è –≤—ã—à–µ —Ç–∞–∫ –∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –¥–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ, –∏—Å—Ö–æ–¥—è –∏–∑ —ç—Ç–æ–≥–æ, –ø–∏—Å–∞—Ç—å –≤ **`Controller`** –µ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–æ **`ViewModel`** –≤—ã–∑–≤–∞—Ç—å –µ–µ, –∫–∞–∫ –º—ã –æ–ø–∏—Å—ã–≤–∞–ª–∏ —Ä–∞–Ω–µ–µ._

_–ù–∏–∂–µ –ø—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ **`DCM_GLOBAL_JS`** :_
```JavaScript
    Ext.define('Override.FOM.view.PageBuilder.ExternalParty.RuntimePanel', {
        override: 'FOM.view.PageBuilder.ExternalParty.RuntimePanel',
        initComponent: function () {
            this.callParent(arguments);
            var me = this, vm = me.getViewModel(), roles = sessionStorage.getItem('IndividualRoles');

            if (Ext.isEmpty(roles)) {
                EcxUtils5.Request.executeRule('ROOT_SD_CHECKBUSINESSROLE', {}
                    , function (response, options, srd) {
                        var result = srd.parsedData.ROLES;
                        if (result.indexOf('CLL_AGENT', 0) > 0) vm.set('isAgent', 1);
                        if (result.indexOf('CLL_EXTAGENT', 0) > 0) vm.set('isAgent', 2);
                        if (result.indexOf('ADMINISTRATOR', 0) > 0) vm.set('isAdmin', 1);
                        sessionStorage.setItem('IndividualRoles',result);
                    }, null, {preventParentCallback: true});
            }
        }
    });
```

  * –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≤–æ—Ç –ø—Ä–∏–º–µ—Ä –±–∏–∑–Ω–µ—Å –ø—Ä–∞–≤–∏–ª–∞. –ü–æ–ª—É—á–∞–µ–º –ò–î –Æ–ó–ï–†–ê, —Å–º–æ—Ç—Ä–∏–º –∫–∞–∫–∏–µ —É –Ω–µ–≥–æ –±–∏–∑–Ω–µ—Å –ø—Ä–∞–≤–∏–ª–∞, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é —Å–ø–∏—Å–æ–∫ –µ–≥–æ –ë–†
```SQL
    DECLARE
      v_CaseWorkerId  INTEGER;
        v_result      INTEGER;
    BEGIN
      v_CaseWorkerId := f_DCM_getCaseWorkerId();
      IF (:BusinessRole IS NOT NULL) THEN
          SELECT COUNT(*) INTO v_result FROM (
              SELECT br.COL_CODE FROM TBL_CASEWORKERBUSINESSROLE cw_br
                INNER JOIN TBL_PPL_BUSINESSROLE br ON br.COL_ID = cw_br.COL_TBL_PPL_BUSINESSROLE
              WHERE cw_br.COL_BR_PPL_CASEWORKER = v_CaseWorkerId AND br.COL_CODE = :BusinessRole
            );
      ELSE
          SELECT LISTAGG(br.COL_CODE, ', ') WITHIN GROUP (ORDER BY  br.COL_CODE ) INTO :Roles
          FROM TBL_CASEWORKERBUSINESSROLE cw_br
            INNER JOIN TBL_PPL_BUSINESSROLE br ON br.COL_ID = cw_br.COL_TBL_PPL_BUSINESSROLE
          WHERE cw_br.COL_BR_PPL_CASEWORKER = v_CaseWorkerId;
      END IF;
      :Roles := nvl(:Roles,'*');
      :OutputValue := v_result;
    END;
```


<br/>

[back to topics](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/0%20Topics/README.md)