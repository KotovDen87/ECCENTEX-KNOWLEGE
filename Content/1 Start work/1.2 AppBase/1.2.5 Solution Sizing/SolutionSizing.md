# РАЗМЕР СОЛЮШЕНА APPBASE DCM
### ПРИНЦИПЫ РАЗМЕРА

Ниже приведены некоторые предположения, сделанные во время планирования типового определения размера солюшена AppBase DCM:
* В каждом кейсе 10-30 документов _(разных типов, в среднем 20 документов / кейс)_
* В каждом кейсе 50-150 тыс. документов _(в среднем 100 тыс.)_
* 100,000 случаев требуют приблизительно. 1 ГБ пространства базы данных _(кейсы среднего размера, в каждом кейсе около 100 полей в таблице базы данных, около 1,5 КБ, кейс имеет связанные сущности, такие как документы, задачи, поручения и т.д. Данная оценка предоставлена на основе имеющихся у нас установок)_.
* 2000 пользователей, 200 одновременно работающих пользователей _(фактически работают на солюшене в любой момент времени)_, обслуживаемый двумя узлами веб-приложения AppBase и двумя узлами системного приложения AppBase, двумя узлами инфраструктуры AppBase.

**_NOTE:_** Узлы веб-приложения AppBase, системного приложения AppBase и инфраструктуры AppBase являются избыточными для обеспечения высокой доступности и отказоустойчивости конфигурации.

Из документа технического требования:
* Количество одновременных пользователей - 500
* Время отклика - менее 5 секунд
* Пиковое количество кейсов в месяц - 460,000
* Пиковое количество кейсов/час - 2000
* Пиковое количество поисков - 40,500

### РАЗМЕР БАЗЫ ДАННЫХ И ФАЙЛОВ

Исходя из технических требований и предположений, приведенных ранее, для 100,000 случаев нам могут потребоваться:
* Пространство базы данных = **1 ГБ** _(см. предположение выше)_
* Дисковое пространство = **100000** x **20** x **100** КБ = **200 ГБ** _(190,73)_

Принимая во внимание конкретный солюшен DCM, количество обращений является основным фактором определения размера, так как все другие переменные, такие как количество пользователей и т.д., Не имеют существенного влияния. В этом случае мы можем приближать линейно.

| Configuration Name | Number of Cases | Database space | Disk space |
|--------------------|-----------------|----------------|------------|
| Baseline           | 100,000         | 1 GB           | 200 GB     |
| Monthly            | 460,000         | 5 GB           | 1 TB       |
| Yearly             | 5,520,000       | 55 GB          | 11 TB      |

Некоторые из ключевых аспектов определения размера файлов и баз данных:
* Дисковое пространство, необходимое для виртуальных машин, не включено.
* Операционные runtime данные не включаются _(например, файлы логов, файлы кеша)_
* Индексы полнотекстового поиска не включены. В зависимости от требований размер индексов может варьироваться.
* Приведенные числа относятся к продакшен среде. Среды разработки и тестирования, скорее всего, будут иметь небольшое количество случаев, в то время как среда аварийного восстановления будет иметь зеркальные данные.

### РАЗМЕРЫ ВИРТУАЛЬНОЙ МАШИНЫ

Исходя из сделанного выше предположения, экспериментально определенный коэффициент параллелизма равен 0,1 _(200 одновременных пользователей против 2000 пользователей)_.

Принимая во внимание архитектуру решения DCM, в которой можно масштабировать все компоненты, и наше предположение, что один триплет ВМ может обрабатывать 200 одновременных пользователей, мы можем приблизительно определить размер ВМ, как показано ниже:

| Configuration Name  | Number of users / concurrent users | AppBase Web Application Services VMs | AppBase System Application Services VMs | AppBase Infrastructure VMs |
|---------------------|-----------------------------------|--------------------------------------|-----------------------------------------|----------------------------|
| Sample installation | 2,000 / 200                       | 2                                    | 2                                       | 2                          |
| DCM installation    | 1,000 / 500                       | 4                                    | 4                                       | 4                          |

Некоторые из ключевых аспектов определения размера виртуальной машины:
* Виртуальные машины для служб общей инфраструктуры _(почтовый сервер, контроллер домена / Active Directory и т.д.)_ и уровень данных не включены.
* Приведенные числа относятся к продакшен среде. Среды разработки и тестирования, скорее всего, будут иметь меньшее количество виртуальных машин. Среда аварийного восстановления может быть полной копией продакшен среды.


<br/>

[back to AppBase](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/blob/main/Content/1%20Start%20work/1.2%20AppBase/AppBase.md) | [back to topics](https://github.com/CrappyCodeMaker/ECCENTEX-KNOWLEGE/tree/main/Content/0%20Topics/Topics.md)